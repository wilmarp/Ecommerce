<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Foot locker</title>

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="/static/css/bootstrap.min.css" />

    <!-- Slick -->
    <link type="text/css" rel="stylesheet" href="/static/css/slick.css" />
    <link type="text/css" rel="stylesheet" href="/static/css/slick-theme.css" />

    <!-- nouislider -->
    <link type="text/css" rel="stylesheet" href="/static/css/nouislider.min.css" />

    <!-- Font Awesome Icon -->
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">

    <!-- Custom stlylesheet -->
    <link type="text/css" rel="stylesheet" href='{{url_for("static", filename="css/style.css")}}' />
    <!-- <link type="text/css" rel="stylesheet" href='css/style.css' /> -->
    <!-- <link type="text/css" rel="stylesheet" href='css/custom.css' /> -->
    <link type="text/css" rel="stylesheet" href='{{url_for("static", filename="css/custom.css")}}' />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>
    <!-- HEADER -->
    <header>
        <!-- TOP HEADER -->
        <div id="top-header">
            <div class="container">
                <ul class="header-links pull-left">
                    <li><a href="#"><i class="fa fa-phone"></i> +021-95-51-84</a></li>
                    <li><a href="#"><i class="fa fa-envelope-o"></i> email@email.com</a></li>
                    <li><a href="#"><i class="fa fa-map-marker"></i> 1734 Stonecoal Road</a></li>
                </ul>
                <ul class="header-links pull-right">
                    <!-- <li><a href="#"><i class="fa fa-dollar"></i> USD</a></li> -->
                    <li><a href="/login" id="iniciarsesion"><i class="fa fa-user-o"></i>Iniciar Sesion</a></li>
                </ul>
            </div>
        </div>
        <!-- /TOP HEADER -->

        <!-- MAIN HEADER -->
        <div id="header">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <!-- LOGO -->
                    <div class="col-md-3">
                        <div class="header-logo">
                            <a href="https://uninorteequipo3.pythonanywhere.com/" class="logo">
                                <img src='{{url_for("static", filename="img/logo.png")}}' alt="">
                                <!-- <img src='img/logo.png"' alt=""> -->
                            </a>
                        </div>
                    </div>
                    <!-- /LOGO -->

                </div>
                <!-- row -->
            </div>
            <!-- container -->
        </div>
        <!-- /MAIN HEADER -->
    </header>
    <!-- /HEADER -->
	<!-- NAVIGATION -->
	<nav id="navigation">
		<!-- container -->
		<div class="container">
			<!-- responsive-nav -->
			<div id="responsive-nav">
				<!-- NAV -->
				<ul class="main-nav nav navbar-nav">
					<li class="active"><a href="/">Inicio</a></li>
					<li><a href="#">Damas</a></li>
					<li><a href="#">Caballeros</a></li>
					<li><a href="#">Niños</a></li>
					<li><a href="/adminUser" id="adminUser">Administrar Usuarios</a></li>
				</ul>
				<!-- /NAV -->
			</div>
			<!-- /responsive-nav -->
		</div>
		<!-- /container -->
	</nav>
	<!-- /NAVIGATION -->


    <div class="section">
        <div class="container filtros">
            <div class="row">
				<div class="col-xs-12">
					<label for="exampleInputEmail1">Buscar Usuario</label>
					<input type="text" class="form-control" placeholder="Digite el usuario a buscar">
				</div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="container crear-producto" id="crear-producto" style="">
            <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#formCrearProducto">Crear Usuario</button>
        </div>
        <div class="container" id="list-usuarios">
			<table class="table">
				<tr>
					<th scope="col">ID</th>
					<th scope="col">Nombre</th>
					<th scope="col">Apellido</th>
					<th scope="col">Identificacion</th>
					<th scope="col">Rol</th>
					<th scope="col">Acciones</th>
				</tr>
            <!-- row -->
				<tr>
					<td scope="row">00</td>
					<td>Usuario prueba</td>
					<td>Quemado</td>
					<td>103844848</td>					
					<td>Administrador</td>
					<td>
						<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#formEditarUsuario">Editar</button>
                        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#formEliminarUsuario">Eliminar</button>
					</td>
				</tr>
				<tr>
					<td scope="row">01</td>
					<td>Edison</td>
					<td>Osorio</td>
					<td>103844848</td>					
					<td>Cliente</td>
					<td>
						<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#formEditarUsuario">Editar</button>
                        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#formEliminarUsuario">Eliminar</button>
					</td>
				</tr>
			</table>
        </div>
    </div>

    <!-- HOT DEAL SECTION -->
    <div id="hot-deal" class="section">
        <!-- container -->
        <div class="container">
            <!-- row -->
            <div class="row">
                <div class="col-md-12">
                    
                </div>
            </div>
            <!-- /row -->
        </div>
        <div id="formEditarUsuario" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="global-container">
                            <div class="card login-form">
                                <div class="card-body">
                                    <h2 class="text-center">Editar Usuario</h2>
                                    <div class="card-text">
                                        <form id="formularioCrearProducto" method="post">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Nombre:</label>
                                                        <input type="text" class="form-control" name="nombre">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Apellido:</label>
                                                        <input type="text" class="form-control" name="apellido">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Documento:</label>
                                                        <input type="text" class="form-control" name="documento">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Dirección:</label>
                                                        <input type="text" class="form-control" name="direccion">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Telefono:</label>
                                                        <input type="text" class="form-control" name="telefono">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Correo:</label>
                                                        <input type="text" class="form-control" name="correo">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Rol:</label>
                                                        <input type="text" class="form-control" name="rol">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group text-center">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <button type="button" class="btn btn-dark" data-dismiss="modal">Cancelar</button>
                                                        <button type="submit" class="btn btn-primary">Guardar</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="formCrearProducto" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="global-container">
                            <div class="card login-form">
                                <div class="card-body">
                                    <h2 class="text-center">Crear Usuario</h2>
                                    <div class="card-text">
                                        <form id="registroForm" method="post">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Tipo de identificación:</label>
                                                        <select name="tipoid" class="form-control" id="tipo_id">
                                                            <option>CC</option>
                                                            <option>TI</option>
                                                            <option>CE</option>
                                                            <option>PA</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Número de identificación:</label>
                                                        <input type="text" class="form-control" name="numid" id="num_id">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Primer nombre:</label>
                                                        <input type="text" class="form-control" name="primernombre" id="primer_nombre">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Segundo nombre:</label>
                                                        <input type="text" class="form-control" name="segundonombre" id="segundo_nombre">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Primer apellido:</label>
                                                        <input type="text" class="form-control" name="primerapellido" id="primer_apellido">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Segundo apellido:</label>
                                                        <input type="text" class="form-control" name="segundoapellido" id="segundo_apellido">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Correo electrónico:</label>
                                                <input type="email" class="form-control" name="correo" id="correo">
                                            </div>
                                            <div class="form-group">
                                                <label>Dirección:</label>
                                                <input type="text" class="form-control" name="direccion" id="direccion">
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Nombre de usuario:</label>
                                                        <input type="text" class="form-control" name="usuario" id="usuario">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Teléfono:</label>
                                                        <input type="text" class="form-control" name="telefono" id="telefono">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Contraseña:</label>
                                                        <input type="password" class="form-control" name="contrasena" id="contrasena">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Repita su contraseña:</label>
                                                        <input type="password" class="form-control" name="repetircontrasena" id="r_contrasena">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Rol:</label>
                                                        <select class="form-control" name="rol" id="rol">
                                                            <option value='3'>Usuario</option>
                                                            <option value='2'>Administrador</option>
                                                            <option value='1'>Super Administrador</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="submit" class="primary-btn" style="width: 100%">Guardar</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- /container -->
    </div>
    <!-- /HOT DEAL SECTION -->

    <!-- FOOTER -->
    <footer id="footer">
        <!-- top footer -->
        <div class="section">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Acerca de Nosotros</h3>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut.</p>
                            <ul class="footer-links">
                                <li><a href="#"><i class="fa fa-map-marker"></i>1734 Stonecoal Road</a></li>
                                <li><a href="#"><i class="fa fa-phone"></i>+021-95-51-84</a></li>
                                <li><a href="#"><i class="fa fa-envelope-o"></i>email@email.com</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Categories</h3>
                            <ul class="footer-links">
                                <li><a href="#">Oferta Caliente</a></li>
                                <li><a href="#">Hombres</a></li>
                                <li><a href="#">Mujeres</a></li>
                                <li><a href="#">Niños</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="clearfix visible-xs"></div>

                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Information</h3>
                            <ul class="footer-links">
                                <li><a href="#">Acerca de Nosotros</a></li>
                                <li><a href="#">Politica de privacidad</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Service</h3>
                            <ul class="footer-links">
                                <li><a href="#">Mi cuenta</a></li>
                                <li><a href="#">Lista de Deseos</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /top footer -->

        <!-- bottom footer -->
        <div id="bottom-footer" class="section">
            <div class="container">
                <!-- row -->
                <div class="row">
                    <div class="col-md-12 text-center">
                        <ul class="footer-payments">
                            <li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
                            <li><a href="#"><i class="fa fa-credit-card"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
                        </ul>
                        <span class="copyright">
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /bottom footer -->
    </footer>
    <!-- /FOOTER -->

    <!-- jQuery Plugins -->
    <script src='{{url_for("static", filename="js/jquery.min.js")}}'></script>
    <script src='{{url_for("static", filename="js/bootstrap.min.js")}}'></script>
    <script src='{{url_for("static", filename="js/slick.min.js")}}'></script>
    <script src='{{url_for("static", filename="js/nouislider.min.js")}}'></script>
    <script src='{{url_for("static", filename="js/jquery.zoom.min.js")}}'></script>
    <script src='{{url_for("static", filename="js/main.js")}}'></script>
    <script src='{{url_for("static", filename="js/home.js")}}'></script>
    <script src='{{url_for("static", filename="js/jquery.validate.min.js")}}'></script>

    <script>
        $(document).ready(function() {
            servicios.getconnect();
            if (localStorage.autenticado == 'true') {
                $('#iniciarsesion').html("Cerrar Sesión");
                $('#iniciarsesion').attr('href', '/logout');
                $('#admin').hide();
                $('#registro').hide();
                $('#adminUser').show();
            }

            $("#formEditarUsuario").validate({
                rules: {
                    nombre: {
                        required: true,
                        minlength: 3
                    },
                    apellido: {
                        required: true,
                        minlength: 3
                    },
                    documento: {
                        required: true,
                        minlength: 3
                    },
                    direccion: {
                        required: false,
                        minlength: 3
                    },
                    telefono: {
                        required: true
                    },
                    correo: {
                        required: true
                    },
                    rol: {
                        required: true
                    }
                },
                messages: {
                    nombre: {
                        required: "Por favor ingrese el nombre del Usuario.",
                        minlength: "El nombre del producto debe tener minimo 3 caracteres"
                    },
                    apellido: {
                        required: "Por favor ingrese el apellido del Usuario.",
                        minlength: "El apellido debe tener minimo 3 caracteres"
                    },
                    documento: {
                        required: "Por favor ingrese un documento correcto.",
                        minlength: "EL documeto debe tener minimo 3 caracteres"
                    },
                    telefono: {
                        required: "Por favor ingrese un telefono valido."
                    },
                    correo: {
						required: "Por favor ingrese un correo valido."
                    },
                    rol: {
                        required: "Por favor seleccione un rol valido."
                    }
                }
            });

        $("#registroForm").validate({
            rules: {
                tipoid: {
                    required: true
                },
                numid: {
                    required: true,
                    minlength: 5
                },
                primernombre: {
                    required: true,
                    minlength: 3
                },
                primerapellido: {
                    required: true,
                    minlength: 3
                },
                correo: {
                    required: true,
                    email: true
                },
                direccion: {
                    required: true,
                    minlength: 3
                },
                usuario: {
                    required: true,
                    minlength: 3
                },
                telefono: {
                    required: true,
                    minlength: 5
                },
                contrasena: {
                    required: true,
                    minlength: 8
                },
                repetircontrasena: {
                    equalTo: "#contrasena"
                },
                acepto: {
                    required: true
                }
            },
            messages: {
                tipoid: {
                    required: "Por favor seleccione su tipo de identificación."
                },
                numid: {
                    required: "Por favor ingrese su número de identificación.",
                    minlength: "El número de identificación debe tener minimo 5 caracteres"
                },
                primernombre: {
                    required: "Por favor ingrese su primer nombre.",
                    minlength: "El primer nombre debe tener minimo 3 caracteres"
                },
                primerapellido: {
                    required: "Por favor ingrese su primer apellido.",
                    minlength: "El primer apellido debe tener minimo 3 caracteres"
                },
                correo: {
                    required: "Por favor ingrese un correo electronico.",
                    email: "Ingrese un correo valido"
                },
                direccion: {
                    required: "Por favor ingrese una dirección.",
                    minlength: "La dirección debe tener minimo 3 caracteres"
                },
                usuario: {
                    required: "Por favor ingrese un usuario.",
                    minlength: "El usuario debe tener minimo 3 caracteres"
                },
                telefono: {
                    required: "Por favor ingrese su telefono.",
                    minlength: "El telefono debe tener minimo 5 caracteres"
                },
                contrasena: {
                    required: "Por favor ingrese una contraseña.",
                    minlength: "La contraseña debe tener minimo 8 caracteres"
                },
                repetircontrasena: {
                    equalTo: "Las contraseñas no coinciden"
                },
                acepto: {
                    required: "Debe aceptar las politicas de privacidad.",
                }
            },
            submitHandler: function(form) {
                // do other things for a valid form
                event.preventDefault();
                var tipo_id = $("#tipo_id").val();
                var num_id = $('#num_id').val();
                var primer_nombre = $('#primer_nombre').val();
                var segundo_nombre = $('#segundo_nombre').val();
                var primer_apellido = $('#primer_apellido').val();
                var segundo_apellido = $('#segundo_apellido').val();
                var correo = $('#correo').val();
                var direccion = $('#direccion').val();
                var usuario = $('#usuario').val();
                var telefono = $('#telefono').val();
                var contrasena = $('#contrasena').val();
                var rol = $('#rol').val();
                var request = $.ajax({
                    url: "../registrarUsuario/",
                    method: "POST",
                    data: JSON.stringify({
                        tipo_id: tipo_id,
                        num_id: num_id,
                        primer_nombre: primer_nombre,
                        segundo_nombre: segundo_nombre,
                        primer_apellido: primer_apellido,
                        segundo_apellido: segundo_apellido,
                        correo: correo,
                        direccion: direccion,
                        usuario: usuario,
                        telefono: telefono,
                        contrasena: contrasena,
                        rol: rol
                    }),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                request.done(function(res) {
                    if (res == 'Ya existe un usuario') {
                        alert('Ya existe un usuario con ese nombre');
                    } else if (res == 'Registro Exitoso') {
                        window.location.replace("/");
                    } else if (res == 'Datos invalidos') {
                        alert('Los datos no se enviaron correctamente, intentelo de nuevo');
                    } else {
                        alert('Se realizó una petición incorrecta')
                    }
                });

                request.fail(function(jqXHR, textStatus) {
                    console.log(jqXHR);
                });
            }
        });
    </script>

</body>

</html>